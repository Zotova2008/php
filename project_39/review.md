## users

**назначение** - хранит данные по пользователям

- user_id - id
- user_name - имя
- user_surname - фамилия
- user_login - логин
- user_password - пароль
- user_hash - уникальный хэш для проверки куки
- user_image - картинка пользователя (не используется)
- user_status - текущий статус пользователя (активный/не активный)
- persent - для клиента, используется для рассчёта комиссии при переходе по ссылке
- wallet - счёт

## programs

**назначение** - хранит данные по программам

- program_id - id
- owner - id рекламодателя
- program_name - название программы
- description - текстовое описание
- url - конечная ссылка перехода
- price - цена перехода
- image - название картинки
- date_start - дата начала действия программы (не используется)
- date_end - срок окончания действия программы (не используется)
- program_status - статус программы (активный/не активный) (не используется)

## rolesmap

**назначение** - хранит связь роль-пользователь

- role_id - id роли
- user_id - id пользователя

## subscriptions

**назначение** - хранит данные подписке вебмастера на программу

- subsription_id - id
- user_id - id пользователя
- program_id - id программы
- link - уникальная ссылка для вебмастера

## roles

**назначение** - хранит роли пользователей

- role_id serial - id
- role_name - название роли

## transactions

**назначение** - хранит данные по транзакциям (переходам по ссылке вебмастера)
**поля:**

- transaction_id - id
- subsription_id - id подписки
- append_date - дата создания
- price - цена перехода
- tax - комисиия

## frauds

**назначение** - хранит данные по отказам
**поля:**

- fraud_id serial - id
- program_id - id программы
- webmaster_id - id вебмастера
- append_date - дата добавления

# Controller_TransactionCore

**Конструктор**
**_входные параметры_**
нет
**_публичные параметры_**

- $model - используемая модель
- $view - используемый конструктор
- $authorised - авторизован ли текущий пользователь (да/нет)
- $userRole - роль текущего пользователя
- $userId - ид текущего пользователся
  **_вызываемые фукнции_**
  createTransaction()
  **_дополнительно_**
  Для работоспособности требуются параметры:
- $\_GET['webm'] - ид вебмастера
- $\_GET['prg'] - ид программы
- $\_GET['url'] - урл для редиректа
  **createTransaction**
  **_назначение_**
  создание транзакции и рассчёты вознаграждения при переходе по ссылке вебмастера
  **_входные параметры_**
- $Webmaster - ид вебмастера
- $Program - ид программы
- $URL - урл для редиректа
  **_выходные параметры_**
- нет
